<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">

<link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
<link rel="shortcut icon" href="/favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
<link rel="manifest" href="/favicon/site.webmanifest" />
  
  <title>Ардуино и индикаторы</title>

  <title>Внешние светодиоды</title>
  <style>
    :root {
      --bg: #f5f7fa;
      --text: #333333;
      --accent: #4a90e2;
      --muted: #666666;
      --radius: 12px;
      --max-width: 800px;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 3rem 1rem;
    }
    .wrapper {
      max-width: var(--max-width);
      margin: 0 auto;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: var(--accent);
    }
    h2 {
      font-size: 1.5rem;
      margin: 2rem 0 0.75rem;
      color: var(--accent);
    }
    p {
      margin-bottom: 1rem;
    }
    ol {
      padding-left: 1.5rem;
    }
	ul {
      padding-left: 1.5rem;
    }
    li {
      margin-bottom: 0.5rem;
	}
	code {
	  font-size: 1rem;
	}
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <h1>Управляем внешними светодиодами</h1>

    <h2>Принцип</h2>
    <p>Светодиод подключают к источнику питания через токоограничивающий резистор. Светодиод, подключённый напрямую, горит ярко, но не долго. Сопротивление <I>R</I> токоограничивающего резистора рассчитывают исходя из имеющегося напряжения <I>U</I> питания; тока <I>I</I> через светодиод, который хотят получить; падения <I>V</I> напряжения на горящем светодиоде (зависит от материала светодиода, слабо зависит от тока). Указанные величины связаны соотношением <i>U=IR+V</i>. Для типового индикаторного светодиода, подключенного к цифровому пину Ардуино, без большой ошибки можно взять значения 5 В, 10 мА, 2 В, что даст сопротивление токоограничивающего резистора около 300 Ом. Светодиоды не любят обратного напряжения; если может случиться включение в обратном направлении (минус на аноде относительно катода) при напряжении более 5 В, то следует принимать меры к защите.</p>
	<p>Если, не забывая о резисторе, подключить светодиод анодом к пину Ардуино, катодом к земле, то он будет загораться при высоком уровне на этом пине и гаснуть при низком. Другой вариант включения &mdash; катодом к пину, анодом к +5 В; в этом случае высокий уровень на пине погасит светодиод, низкий зажжёт. Если к пинам Ардуино подключено несколько светодиодов, то для зажигания или гашения нужного программа должна выставить на нужном пине требуемый уровень, не меняя уровень на остальных пинах.</p>

    <h2>Реализация</h2>
    
	<p>Светодиоды с токоограничивающими резисторами подключены катодом к пинам 2-12 Ардуино (не обязательно ко всем), анодом к +5 В. На пине уже 13 имеется встроенный светодиод. После старта программы все светодиоды погашены. Программа принимает через Serial из терминала номер пина, состояние которого требуется изменить. Например, если ввести 13 и ENTER, то встроенный светодиод загорится, а если повторить этот ввод, то погаснет; аналогично для пинов 2-13 и светодиодов, к ним подключённых.</p>
	<p>Программа реализует способ управления с шагами, в которых:</p>
	<ul>
	 <li>настраивают порты B и D на работу в качестве выходов;</li>
	 <li>принятую строку преобразуют в десятичное число;</li>
	 <li>если это получилось, то проверяют число на вхождение в допустимый диапазон 2-13;</li>
	 <li>определяют порт и маску, соответствующие принятому номеру пина;</li>
	 <li>считывают состояние порта, выполняют ИСКЛЮЧАЮЩЕЕ ИЛИ между считанным состоянием порта и маской, результат записывают в тот же порт.</li>
	</ul>
	
	<h2>Электрическая схема</h2>
	<p><img src="img/020_ExtLEDs.jpg" width=800></p>

    <h2>Файлы</h2>
	<p>Текст программы содержится в файле <code>Ind_y_Ardu.ino</code>, который можно получить с Github <A href="https://github.com/x40in/Ind-y-Ardu/raw/LED_external/Ind_y_Ardu.ino">по ссылке</A>.</p>
	<p>Как вариант, можно получить с Github весь <A href="https://github.com/x40in/Ind-y-Ardu">репозиторий цикла "Ардуино и индикаторы"</A> и выполнить команду</p>
	<p><code>git restore -s LED_external -- Ind_y_Ardu.ino</code></p>
	<p>Файл <code>Ind_y_Ardu.ino</code> в рабочей области будет перезаписан требуемой версией.</p>

    <!--
	<h2>Источники</h2>
    <ol>
	  <li>Alex Gyver. Битовые операции. <A href="https://alexgyver.ru/lessons/bitmath/">https://alexgyver.ru/lessons/bitmath/</A></li>
    </ol> -->
  </div>
</body>
</html>